{"ast":null,"code":"var _jsxFileName = \"/Users/emilessung/dev/psy-website/src/components/article/write/WriteArticle.tsx\";\nimport * as React from 'react';\nimport 'tinymce/tinymce';\nimport contentManager from '../../../ContentManager';\nimport DropDown from '../../common/DropDown';\nimport Loading from '../../common/Loading';\n// import 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\n// import {EditorState} from 'draft-js';\nimport SunEditor from 'suneditor-react';\nimport 'suneditor/dist/css/suneditor.min.css'; // Import Sun Editor's CSS File\n\nimport { align, font, fontColor, fontSize, formatBlock, hiliteColor, horizontalRule, lineHeight, list, paragraphStyle, table, template, textStyle, image, link } from 'suneditor/src/plugins';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass WriteArticle extends React.Component {\n  constructor(props) {\n    super(props);\n    this.editorRef = /*#__PURE__*/React.createRef();\n    this.currentArticle = {};\n\n    this.getSunEditorInstance = sunEditor => {\n      this.editorRef.current = sunEditor;\n    };\n\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.getArticleTitles = this.getArticleTitles.bind(this);\n    this.saveArticle = this.saveArticle.bind(this);\n    this.changeDescription = this.changeDescription.bind(this);\n    this.changeTitle = this.changeTitle.bind(this);\n    this.state = {\n      articleTitles: []\n    };\n  } // static getDerivedStateFromProps(nextProps: WriteArticleProps, prevState: WriteArticleState): WriteArticleState {\n  //     return {\n  //         ...prevState,\n  //         articleTitles: contentManager.articles.map(article => article.title),\n  //         currentArticle: contentManager.articles.find(article => article.id === nextProps.match.params.id) || {}\n  //     };\n  // }\n\n\n  handleChange(content) {\n    console.log('OnChange: ', content);\n  }\n\n  getArticleTitles() {\n    var _this$editorRef$curre;\n\n    this.setState({\n      articleTitles: contentManager.articles.map(article => article.title)\n    });\n    (_this$editorRef$curre = this.editorRef.current) === null || _this$editorRef$curre === void 0 ? void 0 : _this$editorRef$curre.setContents(this.currentArticle.data || '');\n  }\n\n  updatePublish() {}\n\n  saveArticle(e) {\n    var _this$editorRef$curre2;\n\n    e.preventDefault();\n    let currentArticle = this.currentArticle;\n    let content = ((_this$editorRef$curre2 = this.editorRef.current) === null || _this$editorRef$curre2 === void 0 ? void 0 : _this$editorRef$curre2.getContents(true)) || '';\n\n    if (currentArticle) {\n      if (currentArticle.id) {\n        contentManager.modifyArticle(currentArticle.id, currentArticle.description || '', currentArticle.title || '', content);\n      } else {\n        contentManager.createArticle(currentArticle.description || '', currentArticle.title || '', content);\n      }\n    }\n  }\n\n  changeTitle(e) {\n    if (this.currentArticle) {\n      this.currentArticle.title = e.target.value;\n    }\n  }\n\n  changeDescription(e) {\n    if (this.currentArticle) {\n      this.currentArticle.description = e.target.value;\n    }\n  }\n\n  componentDidMount() {\n    contentManager.addListener('article', this.getArticleTitles);\n  }\n\n  componentWillUnmount() {\n    contentManager.removeListener('article', this.getArticleTitles);\n  }\n\n  render() {\n    var _this$currentArticle;\n\n    if (!contentManager.isAdmin) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Access denied\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Only admins can write new articles\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true);\n    }\n\n    this.currentArticle = contentManager.articles.find(article => article.id === this.props.match.params.id) || {};\n    let showEditor = !!this.currentArticle || !this.props.match.params.id;\n    let dropDownItems = contentManager.articles.map(article => ({\n      text: article.title,\n      callback: () => this.props.history.push('/write/' + article.id)\n    }));\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: showEditor ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(DropDown, {\n          options: dropDownItems\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: this.currentArticle ? this.currentArticle.title : 'Title',\n            onChange: this.changeTitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: this.currentArticle ? this.currentArticle.description : 'Description',\n            onChange: this.changeDescription\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"published\", /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"published\",\n              type: \"checkBox\",\n              onChange: this.updatePublish\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.saveArticle,\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(SunEditor, {\n          autoFocus: true,\n          lang: \"en\",\n          setOptions: {\n            showPathLabel: false,\n            minHeight: '50vh',\n            maxHeight: '50vh',\n            placeholder: 'Your text here',\n            plugins: [align, font, fontColor, fontSize, formatBlock, hiliteColor, horizontalRule, lineHeight, list, paragraphStyle, table, template, textStyle, image, link],\n            buttonList: [['undo', 'redo'], ['font', 'fontSize', 'formatBlock'], ['paragraphStyle'], ['bold', 'underline', 'italic', 'strike', 'subscript', 'superscript'], ['fontColor', 'hiliteColor'], ['removeFormat'], '/', // Line break\n            ['outdent', 'indent'], ['align', 'horizontalRule', 'list', 'lineHeight'], ['table', 'link', 'image']],\n            formats: ['p', 'div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\n            font: ['Arial', 'Calibri', 'Comic Sans', 'Courier', 'Garamond', 'Georgia', 'Impact', 'Lucida Console', 'Palatino Linotype', 'Segoe UI', 'Tahoma', 'Times New Roman', 'Trebuchet MS']\n          },\n          onChange: this.handleChange,\n          getSunEditorInstance: this.getSunEditorInstance //                    defaultValue= {this.currentArticle ? this.currentArticle.data : \"<p>Your text here...</p>\"}\n          ,\n          defaultValue: (_this$currentArticle = this.currentArticle) === null || _this$currentArticle === void 0 ? void 0 : _this$currentArticle.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 21\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nexport default WriteArticle;","map":{"version":3,"sources":["/Users/emilessung/dev/psy-website/src/components/article/write/WriteArticle.tsx"],"names":["React","contentManager","DropDown","Loading","SunEditor","align","font","fontColor","fontSize","formatBlock","hiliteColor","horizontalRule","lineHeight","list","paragraphStyle","table","template","textStyle","image","link","WriteArticle","Component","constructor","props","editorRef","createRef","currentArticle","getSunEditorInstance","sunEditor","current","componentDidMount","bind","getArticleTitles","saveArticle","changeDescription","changeTitle","state","articleTitles","handleChange","content","console","log","setState","articles","map","article","title","setContents","data","updatePublish","e","preventDefault","getContents","id","modifyArticle","description","createArticle","target","value","addListener","componentWillUnmount","removeListener","render","isAdmin","find","match","params","showEditor","dropDownItems","text","callback","history","push","showPathLabel","minHeight","maxHeight","placeholder","plugins","buttonList","formats"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport 'tinymce/tinymce';\nimport contentManager from '../../../ContentManager';\nimport DropDown, {DropDownItem} from '../../common/DropDown';\nimport {Article} from '../../../interfaces';\nimport Loading from '../../common/Loading';\nimport {RouteComponentProps} from 'react-router-dom';\n// import 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\n// import {EditorState} from 'draft-js';\n\nimport SunEditor from 'suneditor-react';\nimport SunEditorCore from 'suneditor/src/lib/core';\nimport 'suneditor/dist/css/suneditor.min.css'; // Import Sun Editor's CSS File\nimport {\n    align,\n    font,\n    fontColor,\n    fontSize,\n    formatBlock,\n    hiliteColor,\n    horizontalRule,\n    lineHeight,\n    list,\n    paragraphStyle,\n    table,\n    template,\n    textStyle,\n    image,\n    link\n} from 'suneditor/src/plugins';\n\nexport interface WriteArticlePropsMatchParams {\n    id?: string;\n}\n\nexport interface WriteArticleProps extends RouteComponentProps<WriteArticlePropsMatchParams> {}\n\nexport interface WriteArticleState {\n    articleTitles: string[];\n}\n\nclass WriteArticle extends React.Component<WriteArticleProps, WriteArticleState> {\n    editorRef: React.RefObject<SunEditorCore | null> = React.createRef();\n    currentArticle: Partial<Article> = {};\n\n    constructor(props: WriteArticleProps) {\n        super(props);\n        this.componentDidMount = this.componentDidMount.bind(this);\n        this.getArticleTitles = this.getArticleTitles.bind(this);\n        this.saveArticle = this.saveArticle.bind(this);\n        this.changeDescription = this.changeDescription.bind(this);\n        this.changeTitle = this.changeTitle.bind(this);\n        this.state = {\n            articleTitles: [],\n        };\n    }\n\n    // static getDerivedStateFromProps(nextProps: WriteArticleProps, prevState: WriteArticleState): WriteArticleState {\n    //     return {\n    //         ...prevState,\n    //         articleTitles: contentManager.articles.map(article => article.title),\n    //         currentArticle: contentManager.articles.find(article => article.id === nextProps.match.params.id) || {}\n    //     };\n    // }\n\n    getSunEditorInstance = (sunEditor: SunEditorCore) => {\n        this.editorRef.current = sunEditor;\n    };\n\n    handleChange(content: string) {\n        console.log('OnChange: ', content);\n    }\n\n    getArticleTitles() {\n        this.setState({\n            articleTitles: contentManager.articles.map(article => article.title),\n        });\n\n        this.editorRef.current?.setContents(this.currentArticle.data || '');\n    }\n\n    updatePublish() {}\n\n    saveArticle(e: React.FormEvent) {\n        e.preventDefault();\n\n        let currentArticle = this.currentArticle;\n        let content = this.editorRef.current?.getContents(true) || '';\n        if (currentArticle) {\n            if (currentArticle.id) {\n                contentManager.modifyArticle(\n                    currentArticle.id,\n                    currentArticle.description || '',\n                    currentArticle.title || '',\n                    content\n                );\n            } else {\n                contentManager.createArticle(currentArticle.description || '', currentArticle.title || '', content);\n            }\n        }\n    }\n\n    changeTitle(e: React.ChangeEvent<HTMLInputElement>) {\n        if (this.currentArticle) {\n            this.currentArticle.title = e.target.value;\n        }\n    }\n\n    changeDescription(e: React.ChangeEvent<HTMLInputElement>) {\n        if (this.currentArticle) {\n            this.currentArticle.description = e.target.value;\n        }\n    }\n\n    componentDidMount() {\n        contentManager.addListener('article', this.getArticleTitles);\n    }\n\n    componentWillUnmount() {\n        contentManager.removeListener('article', this.getArticleTitles);\n    }\n    render() {\n\n        if(!contentManager.isAdmin) {\n            return (\n                <>\n                <h1>Access denied</h1>\n                <p>Only admins can write new articles</p>\n                </>\n            )\n        }\n\n        this.currentArticle = contentManager.articles.find(article => article.id === this.props.match.params.id) || {};\n\n        let showEditor: boolean = !!this.currentArticle || !this.props.match.params.id;\n        let dropDownItems: DropDownItem[] = contentManager.articles.map(article => ({\n            text: article.title,\n            callback: () => this.props.history.push('/write/' + article.id)\n        }));\n\n        return (\n            <>\n                {showEditor ? (\n                    <>\n                        <DropDown options={dropDownItems} />\n                        <form>\n                            <input\n                                type='text'\n                                placeholder={this.currentArticle ? this.currentArticle.title : 'Title'}\n                                onChange={this.changeTitle}\n                            />\n                            <input\n                                type='text'\n                                placeholder={\n                                    this.currentArticle ? this.currentArticle.description : 'Description'\n                                }\n                                onChange={this.changeDescription}\n                            />\n                            <label>\n                                published\n                                <input name='published' type='checkBox' onChange={this.updatePublish} />\n                            </label>\n\n                            <button onClick={this.saveArticle}>Save</button>\n                        </form>\n                        <SunEditor\n                            autoFocus={true}\n                            lang='en'\n                            setOptions={{\n                                showPathLabel: false,\n                                minHeight: '50vh',\n                                maxHeight: '50vh',\n                                placeholder: 'Your text here',\n                                plugins: [\n                                    align,\n                                    font,\n                                    fontColor,\n                                    fontSize,\n                                    formatBlock,\n                                    hiliteColor,\n                                    horizontalRule,\n                                    lineHeight,\n                                    list,\n                                    paragraphStyle,\n                                    table,\n                                    template,\n                                    textStyle,\n                                    image,\n                                    link\n                                ],\n                                buttonList: [\n                                    ['undo', 'redo'],\n                                    ['font', 'fontSize', 'formatBlock'],\n                                    ['paragraphStyle'],\n                                    ['bold', 'underline', 'italic', 'strike', 'subscript', 'superscript'],\n                                    ['fontColor', 'hiliteColor'],\n                                    ['removeFormat'],\n                                    '/', // Line break\n                                    ['outdent', 'indent'],\n                                    ['align', 'horizontalRule', 'list', 'lineHeight'],\n                                    ['table', 'link', 'image']\n                                ],\n                                formats: ['p', 'div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\n                                font: [\n                                    'Arial',\n                                    'Calibri',\n                                    'Comic Sans',\n                                    'Courier',\n                                    'Garamond',\n                                    'Georgia',\n                                    'Impact',\n                                    'Lucida Console',\n                                    'Palatino Linotype',\n                                    'Segoe UI',\n                                    'Tahoma',\n                                    'Times New Roman',\n                                    'Trebuchet MS'\n                                ]\n                            }}\n                            onChange={this.handleChange}\n                            getSunEditorInstance={this.getSunEditorInstance}\n                            //                    defaultValue= {this.currentArticle ? this.currentArticle.data : \"<p>Your text here...</p>\"}\n                            defaultValue={this.currentArticle?.data}\n                        />\n                    </>\n                ) : (\n                    <Loading />\n                )}\n            </>\n        );\n    }\n}\n\nexport default WriteArticle;\n"]},"metadata":{},"sourceType":"module"}